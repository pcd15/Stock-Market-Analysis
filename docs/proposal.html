<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyzing the Impacts of Inflation and Interest Rates on the Stock Market</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Git Real</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./proposal.html" aria-current="page">Proposal</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.pdf">Presentation</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./report.html">Report</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">About</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-1" id="toc-data-1" class="nav-link active" data-scroll-target="#data-1">Data 1</a>
  <ul class="collapse">
  <li><a href="#introduction-and-data" id="toc-introduction-and-data" class="nav-link" data-scroll-target="#introduction-and-data">Introduction and data</a></li>
  <li><a href="#research-question" id="toc-research-question" class="nav-link" data-scroll-target="#research-question">Research question</a></li>
  <li><a href="#glimpse-of-data" id="toc-glimpse-of-data" class="nav-link" data-scroll-target="#glimpse-of-data">Glimpse of data</a></li>
  </ul></li>
  <li><a href="#data-2" id="toc-data-2" class="nav-link" data-scroll-target="#data-2">Data 2</a>
  <ul class="collapse">
  <li><a href="#introduction-and-data-1" id="toc-introduction-and-data-1" class="nav-link" data-scroll-target="#introduction-and-data-1">Introduction and data</a></li>
  <li><a href="#research-question-1" id="toc-research-question-1" class="nav-link" data-scroll-target="#research-question-1">Research question</a></li>
  <li><a href="#glimpse-of-data-1" id="toc-glimpse-of-data-1" class="nav-link" data-scroll-target="#glimpse-of-data-1">Glimpse of data</a></li>
  </ul></li>
  <li><a href="#data-3" id="toc-data-3" class="nav-link" data-scroll-target="#data-3">Data 3</a>
  <ul class="collapse">
  <li><a href="#introduction-and-data-2" id="toc-introduction-and-data-2" class="nav-link" data-scroll-target="#introduction-and-data-2">Introduction and data</a></li>
  <li><a href="#research-question-2" id="toc-research-question-2" class="nav-link" data-scroll-target="#research-question-2">Research question</a></li>
  <li><a href="#glimpse-of-data-2" id="toc-glimpse-of-data-2" class="nav-link" data-scroll-target="#glimpse-of-data-2">Glimpse of data</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analyzing the Impacts of Inflation and Interest Rates on the Stock Market</h1>
<p class="subtitle lead">Project Proposal</p>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data-1" class="level1">
<h1>Data 1</h1>
<section id="introduction-and-data" class="level2">
<h2 class="anchored" data-anchor-id="introduction-and-data">Introduction and data</h2>
<p>Data set 1 comes from 4 sources. The data on the federal-funds rate and inflation rate were obtained from Macrotrends (<a href="https://www.macrotrends.net/2015/fed-funds-rate-historical-chart" class="uri">https://www.macrotrends.net/2015/fed-funds-rate-historical-chart</a>), the data on S&amp;P 500 yearly total returns was obtained from Slickcharts (https://www.slickcharts.com/sp500/returns), and the data for monthly statistics was obtained Official Data (https://www.officialdata.org/us/stocks/s-p-500/1900). The data was collected by retrieving the data publicly published on the stock-market exchange. Each observation represents a different month in a given year. For each month, we’ve compiled the return on investment, as well as the the cumulative value of $100 invested in January of 1900; for each year, we’ve compiled the mean federal-funds rate, inflation rate, YTD returns, and annual change in inflation, all of which are included in historical_data. While the data shows heavy fluctuations, we see that federal funds and inflation rate both peaked around 1980. No ethical concerns.</p>
</section>
<section id="research-question" class="level2">
<h2 class="anchored" data-anchor-id="research-question">Research question</h2>
<p>With data set 1, we would like to answer the following question: How have interest rates and inflation rates historically impacted the stock market? Tracking historical trends can be useful in maximizing profit from the bullish or bearish market, making it significant for investors or fin-tech workers. Our data assesses the impact of quantitative variables such as interest rate and inflation rate. It also assesses categorical variables such as time and whether or not interest rate and inflation rate rose or fell (TRUE if they rose, FALSE if they fell). Our hypothesis is that the stock market (generalized by the S&amp;P 500 index) would be hurt by high inflation and corresponding high interest rates (generalized by the federal-funds rate) because consumers’ discretionary incomes drop and companies are disincentivized from borrowing due to the higher costs associated with taking out a loan.</p>
</section>
<section id="glimpse-of-data" class="level2">
<h2 class="anchored" data-anchor-id="glimpse-of-data">Glimpse of data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># market_by_month was scraped from https://www.officialdata.org/us/stocks/s-p-500/1900</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>fed_funds_rate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/fed-funds-rate-historical-chart.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>inflation_rate <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/united-states-inflation-rate-cpi.csv"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sp500_year <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/history.csv"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>market_by_month <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/market_by_month.csv"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(fed_funds_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 24,473
Columns: 1
$ `Macrotrends Data Download` &lt;chr&gt; "Federal Funds Rate - 62 Year Historical C…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(inflation_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 71
Columns: 1
$ `Macrotrends Data Download` &lt;chr&gt; "U.S. Inflation Rate 1960-2022", "DISCLAIM…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 95
Columns: 2
$ `2021`  &lt;dbl&gt; 2020, 2019, 2018, 2017, 2016, 2015, 2014, 2013, 2012, 2011, 20…
$ `28.71` &lt;dbl&gt; 18.40, 31.49, -4.38, 21.83, 11.96, 1.38, 13.69, 32.39, 16.00, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(market_by_month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,473
Columns: 4
$ year              &lt;dbl&gt; 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900, 1900…
$ month             &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5…
$ monthly_return    &lt;chr&gt; "2.10%", "1.11%", "1.59%", "-4.42%", "-2.64%", "0.36…
$ monthly_avg_price &lt;dbl&gt; 102.10, 103.23, 104.87, 100.24, 97.59, 97.95, 99.65,…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|: fixing-and-combining-data-sets-for-year</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(fed_funds_rate)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"day"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(inflation_rate)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"year"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>fed_funds_rate <span class="ot">&lt;-</span> fed_funds_rate <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">9</span><span class="sc">:</span><span class="fu">nrow</span>(fed_funds_rate)) <span class="sc">|&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(day, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"day"</span>, <span class="st">"fed_funds_rate"</span>), <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>fed_funds_rate <span class="ot">&lt;-</span> fed_funds_rate <span class="sc">|&gt;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">substring</span>(day, <span class="dv">1</span>, <span class="dv">4</span>))<span class="sc">|&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> day) <span class="sc">|&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_fed_funds_rate =</span> <span class="fu">mean</span>(<span class="fu">as.numeric</span>(fed_funds_rate)))</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>inflation_rate <span class="ot">&lt;-</span> inflation_rate <span class="sc">|&gt;</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">11</span><span class="sc">:</span><span class="fu">nrow</span>(inflation_rate)) <span class="sc">|&gt;</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(year, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"inflation_rate"</span>, <span class="st">"inflation_annual_change"</span>), <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>inflation_rate <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(inflation_rate)</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>inflation_rate<span class="ot">&lt;-</span> inflation_rate <span class="sc">|&gt;</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substring</span>(year, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sp500_year) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>,<span class="st">"year_to_date_return"</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>sp500_year <span class="ot">&lt;-</span> sp500_year<span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.character</span>(year))</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>historical_data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(inflation_rate, fed_funds_rate, <span class="at">by =</span> <span class="st">"year"</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>historical_data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(historical_data, sp500_year, <span class="at">by =</span> <span class="st">"year"</span>)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>historical_data <span class="ot">&lt;-</span> historical_data <span class="sc">|&gt;</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_fed_funds_rate =</span> <span class="fu">round</span>(mean_fed_funds_rate <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_period =</span> <span class="fu">if_else</span>(year <span class="sc">&gt;</span> <span class="dv">1990</span>, <span class="st">"recent"</span>, <span class="st">"not so recent"</span>),</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_character =</span> <span class="fu">as.character</span>(year),</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">decade =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"196"</span>) <span class="sc">~</span> <span class="st">"'60s"</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"197"</span>) <span class="sc">~</span> <span class="st">"'70s"</span>,</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"198"</span>) <span class="sc">~</span> <span class="st">"'80s"</span>,</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"199"</span>) <span class="sc">~</span> <span class="st">"'90s"</span>,</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"197"</span>) <span class="sc">~</span> <span class="st">"'70s"</span>,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"198"</span>) <span class="sc">~</span> <span class="st">"'80s"</span>,</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"199"</span>) <span class="sc">~</span> <span class="st">"'90s"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"200"</span>) <span class="sc">~</span> <span class="st">"2000s"</span>,</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"201"</span>) <span class="sc">~</span> <span class="st">"2010s"</span>,</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(year_character, <span class="st">"202"</span>) <span class="sc">~</span> <span class="st">"2020"</span>,</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    year, inflation_rate, inflation_annual_change, </span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    mean_fed_funds_rate, year_to_date_return, time_period, decade</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(historical_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 60
Columns: 7
$ year                    &lt;chr&gt; "1961", "1962", "1963", "1964", "1965", "1966"…
$ inflation_rate          &lt;chr&gt; "1.0707", "1.1988", "1.2397", "1.2789", "1.585…
$ inflation_annual_change &lt;chr&gt; "-0.39", "0.13", "0.04", "0.04", "0.31", "1.43…
$ mean_fed_funds_rate     &lt;dbl&gt; 1.95, 2.71, 3.18, 3.50, 4.08, 5.11, 4.22, 5.66…
$ year_to_date_return     &lt;dbl&gt; 26.89, -8.73, 22.80, 16.48, 12.45, -10.06, 23.…
$ time_period             &lt;chr&gt; "not so recent", "not so recent", "not so rece…
$ decade                  &lt;chr&gt; "'60s", "'60s", "'60s", "'60s", "'60s", "'60s"…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|: combining-data-sets-for-month</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>market_by_month <span class="ot">&lt;-</span> market_by_month <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.character</span>(year)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>historical_data <span class="ot">&lt;-</span> historical_data <span class="sc">|&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(market_by_month, <span class="at">by =</span> <span class="st">"year"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>historical_data <span class="ot">&lt;-</span> historical_data <span class="sc">|&gt;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    year, month, monthly_return, monthly_avg_price</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(historical_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 720
Columns: 10
$ year                    &lt;chr&gt; "1961", "1961", "1961", "1961", "1961", "1961"…
$ month                   &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3…
$ monthly_return          &lt;chr&gt; "4.37%", "3.40%", "2.92%", "1.26%", "-1.08%", …
$ monthly_avg_price       &lt;dbl&gt; 25134.18, 25988.00, 26746.59, 27084.50, 26791.…
$ inflation_rate          &lt;chr&gt; "1.0707", "1.0707", "1.0707", "1.0707", "1.070…
$ inflation_annual_change &lt;chr&gt; "-0.39", "-0.39", "-0.39", "-0.39", "-0.39", "…
$ mean_fed_funds_rate     &lt;dbl&gt; 1.95, 1.95, 1.95, 1.95, 1.95, 1.95, 1.95, 1.95…
$ year_to_date_return     &lt;dbl&gt; 26.89, 26.89, 26.89, 26.89, 26.89, 26.89, 26.8…
$ time_period             &lt;chr&gt; "not so recent", "not so recent", "not so rece…
$ decade                  &lt;chr&gt; "'60s", "'60s", "'60s", "'60s", "'60s", "'60s"…</code></pre>
</div>
</div>
</section>
</section>
<section id="data-2" class="level1">
<h1>Data 2</h1>
<section id="introduction-and-data-1" class="level2">
<h2 class="anchored" data-anchor-id="introduction-and-data-1">Introduction and data</h2>
<ul>
<li>The source of the data is Investing.com (https://www.investing.com/indices/us-spx-500-historical-data), who gets their live data from financial-data providers, including the stock market exchange and directly from market makers (who set stock prices to match supply and demand). The data is collected daily (well really, every second), and it is collected by monitoring various operations (selling, buying, etc.) done in the stock market, which lead to increases and decreases in prices (which are then ultimately collected). Each observation represents a different day this year, with each day having data on the high/low/opening/closing prices, differences in high/low and opening/closing prices, daily percentage change, and whether the change in price for the day was a gain. The observations show heavy fluctuation as expected with something as volatile as the stock market, but this year a general decline in share prices is evident, which could partially be attributed to inflation and interest rates. No ethical concerns.</li>
</ul>
</section>
<section id="research-question-1" class="level2">
<h2 class="anchored" data-anchor-id="research-question-1">Research question</h2>
<ul>
<li>With the highest inflation rates ever seen, traders and those who work in the financial industry are even more unsure about how to go about trading in the stock market. Of course it is difficult to ever predict the market, but even more so in times like this. With this dataset, we would like to address the following question: how have high inflation rates and interest rates impacted the S&amp;P 500 this year? And how does this compare to the stock market’s historical performance in similar economic times? This question is important as people want to know that when they invest in something, generally their money is safe. In times like these, it’s hard to say when it is actually safe to invest in something, and so we want to dive deeper into when you might actually want to be bullish or bearish in times like these. Our hypothesis is the following: while the stock market will fall as inflation rates rise (which are followed by interest rates as well), there are good times to invest even with the problematic circumstances. Our variables are mostly quantitative, analyzing interest rates, inflation rates, stock price rise and falls, while the categorical variables are the date and whether or not there was a net gain or loss (categorized by TRUE if gain and FALSE if not) on the day.</li>
</ul>
</section>
<section id="glimpse-of-data-1" class="level2">
<h2 class="anchored" data-anchor-id="glimpse-of-data-1">Glimpse of data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sp500_current <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/S&amp;amp;P 500 Historical Data (5).csv"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_current)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 524
Columns: 7
$ Date       &lt;chr&gt; "10/28/2022", "10/27/2022", "10/26/2022", "10/25/2022", "10…
$ Price      &lt;dbl&gt; 3901.06, 3807.30, 3830.60, 3859.11, 3797.34, 3752.75, 3665.…
$ Open       &lt;dbl&gt; 3808.26, 3834.69, 3825.97, 3799.44, 3762.01, 3657.10, 3689.…
$ High       &lt;dbl&gt; 3905.42, 3859.95, 3886.15, 3862.85, 3810.74, 3757.89, 3736.…
$ Low        &lt;dbl&gt; 3808.26, 3803.79, 3824.07, 3799.44, 3741.65, 3647.42, 3656.…
$ Vol.       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ `Change %` &lt;chr&gt; "2.46%", "-0.61%", "-0.74%", "1.63%", "1.19%", "2.37%", "-0…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>sp500_curr_updated <span class="ot">&lt;-</span> sp500_current <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">daily_diff =</span> Price <span class="sc">-</span> Open,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_minus_low =</span> High <span class="sc">-</span> Low,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">daily_percent_change =</span> ((Price <span class="sc">-</span> Open) <span class="sc">/</span> Open) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain =</span> <span class="fu">if_else</span>(daily_diff <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"gain"</span>, <span class="st">"loss"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date, Price, Open, High, Low, daily_percent_change, daily_diff, high_minus_low, gain)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_curr_updated)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 524
Columns: 9
$ Date                 &lt;chr&gt; "10/28/2022", "10/27/2022", "10/26/2022", "10/25/…
$ Price                &lt;dbl&gt; 3901.06, 3807.30, 3830.60, 3859.11, 3797.34, 3752…
$ Open                 &lt;dbl&gt; 3808.26, 3834.69, 3825.97, 3799.44, 3762.01, 3657…
$ High                 &lt;dbl&gt; 3905.42, 3859.95, 3886.15, 3862.85, 3810.74, 3757…
$ Low                  &lt;dbl&gt; 3808.26, 3803.79, 3824.07, 3799.44, 3741.65, 3647…
$ daily_percent_change &lt;dbl&gt; 2.4368084, -0.7142690, 0.1210151, 1.5704946, 0.93…
$ daily_diff           &lt;dbl&gt; 92.80, -27.39, 4.63, 59.67, 35.33, 95.65, -23.27,…
$ high_minus_low       &lt;dbl&gt; 97.16, 56.16, 62.08, 63.41, 69.09, 110.47, 79.56,…
$ gain                 &lt;chr&gt; "gain", "loss", "gain", "gain", "gain", "gain", "…</code></pre>
</div>
</div>
</section>
</section>
<section id="data-3" class="level1">
<h1>Data 3</h1>
<section id="introduction-and-data-2" class="level2">
<h2 class="anchored" data-anchor-id="introduction-and-data-2">Introduction and data</h2>
<p>The source of the data is DATA HUB (https://datahub.io/core/s-and-p-500-companies-financials#resource-constituents). This data was collected from S&amp;P Dow Jones Indices which is collected daily. Each observation represents a different company; for each company, their name, ticker symbol, weighting percentage in the S&amp;P 500 index, price at the beginning of the year, current price, YTD return, sector, and return category (positive if YTD return &gt; 0, else positive) are compiled. The observation shows that over the course of the year the share price has gone down, with the exception of October, where it went up 2.24% (and then fell down again). The year-to-date return was -23.09%, and month-to-date return was 2.24%. No ethical concerns.</p>
</section>
<section id="research-question-2" class="level2">
<h2 class="anchored" data-anchor-id="research-question-2">Research question</h2>
<p>Gathering data on how different businesses are performing, and whether this correlates with the industry they are in, is useful to indicate whether performance patterns are caused by individual businesses or specific sectors, and strategies can be derived from each. Our hypothesis is the following: Non-essential industries will decrease more in price (have lower YTD returns) than essential industries, as consumers must purchase essential goods no matter how high the inflation rate is. The type of variables in our research question are mainly quantitative, analyzing inflation rate, interest rate and comparing these across sectors and specific businesses (these are our categorical variables).</p>
</section>
<section id="glimpse-of-data-2" class="level2">
<h2 class="anchored" data-anchor-id="glimpse-of-data-2">Glimpse of data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>sp500_by_company <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/sp500_by_company.csv"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>sp500_by_sector <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/constituents_csv.csv"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_by_company)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 503
Columns: 5
$ company       &lt;chr&gt; "Apple Inc.", "Microsoft Corporation", "Amazon.com Inc."…
$ symbol        &lt;chr&gt; "AAPL", "MSFT", "AMZN", "GOOGL", "TSLA", "GOOG", "BRK.B"…
$ weight        &lt;dbl&gt; 6.940598, 5.685000, 3.296234, 1.931161, 1.874430, 1.7375…
$ current_price &lt;chr&gt; "&nbsp;&nbsp;144.00", "&nbsp;&nbsp;236.16", "&nbsp;&nbsp;115.13", "&nbsp;&nbsp;99.91", "&nbsp;&nbsp;214.29…
$ ytd_return    &lt;chr&gt; "-19.05%", "-29.09%", "-30.21%", "-30.43%", "-37.49%", "…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_by_sector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 505
Columns: 3
$ Symbol &lt;chr&gt; "MMM", "AOS", "ABT", "ABBV", "ABMD", "ACN", "ATVI", "ADM", "ADB…
$ Name   &lt;chr&gt; "3M", "A. O. Smith", "Abbott Laboratories", "AbbVie", "Abiomed"…
$ Sector &lt;chr&gt; "Industrials", "Industrials", "Health Care", "Health Care", "He…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|: combining-data-set</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sp500_by_company was created by joining two scraped data frames</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># scraped from:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.slickcharts.com/sp500</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.slickcharts.com/sp500/performance</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>sp500_by_sector <span class="ot">&lt;-</span> sp500_by_sector <span class="sc">|&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">symbol =</span> Symbol,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> Name,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sector =</span> Sector</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(symbol, name, sector)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>sp500_by_company_and_sector <span class="ot">&lt;-</span> sp500_by_company <span class="sc">|&gt;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sp500_by_sector, <span class="at">by =</span> <span class="st">"symbol"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(name) <span class="sc">|&gt;</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, symbol, weight, current_price, ytd_return, sector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|: fixing-NAs-and-adding-vars</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>sp500_by_company_and_sector <span class="ot">&lt;-</span> sp500_by_company_and_sector <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ytd_return_num =</span> <span class="fu">str_remove</span>(ytd_return, <span class="st">"%"</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ytd_return_num =</span> <span class="fu">as.numeric</span>(ytd_return_num),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">current_price =</span> <span class="fu">str_trim</span>(current_price),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">current_price =</span> <span class="fu">as.numeric</span>(current_price),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">return_category =</span> <span class="fu">if_else</span>(ytd_return_num <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"gain"</span>, <span class="st">"loss"</span>),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ytd_factor =</span>  (ytd_return_num <span class="sc">+</span> <span class="dv">100</span>) <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">original_price =</span> current_price <span class="sc">/</span> ytd_factor, </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"MOH"</span> <span class="sc">~</span> <span class="st">"Molina Healthcare"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"EPAM"</span> <span class="sc">~</span> <span class="st">"EPAM Systems"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"ELV"</span> <span class="sc">~</span> <span class="st">"Elevance Health"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"KDP"</span> <span class="sc">~</span> <span class="st">"Keurig Dr Pepper"</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"VICI"</span> <span class="sc">~</span> <span class="st">"Vici Properties"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"META"</span> <span class="sc">~</span> <span class="st">"Meta Platforms"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CSGP"</span> <span class="sc">~</span> <span class="st">"CoStar Group"</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"WBD"</span> <span class="sc">~</span> <span class="st">"Warner Bros Discovery"</span>,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CEG"</span> <span class="sc">~</span> <span class="st">"Constellation Energy"</span>,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"ON"</span> <span class="sc">~</span> <span class="st">"ON Semiconductor"</span>,</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"WTW"</span> <span class="sc">~</span> <span class="st">"Willis Towers Watson"</span>,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"PCG"</span> <span class="sc">~</span> <span class="st">"PG&amp;E"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"INVH"</span> <span class="sc">~</span> <span class="st">"Invitation Homes"</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"BALL"</span> <span class="sc">~</span> <span class="st">"Ball"</span>,</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"FDS"</span> <span class="sc">~</span> <span class="st">"FactSet Research Systems"</span>,</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"EQT"</span> <span class="sc">~</span> <span class="st">"EQT"</span>,</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"TRGP"</span> <span class="sc">~</span> <span class="st">"Targa Resources"</span>,</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CPT"</span> <span class="sc">~</span> <span class="st">"Camden Property Trust"</span>,</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"NDSN"</span> <span class="sc">~</span> <span class="st">"Nordson"</span>,</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"SEDG"</span> <span class="sc">~</span> <span class="st">"Solaredge Technologies"</span>,</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"PARA"</span> <span class="sc">~</span> <span class="st">"Paramount Global Class B"</span>,</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"SBNY"</span> <span class="sc">~</span> <span class="st">"Signature Bank"</span>,</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> name</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">sector =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"MOH"</span> <span class="sc">~</span> <span class="st">"Health Care"</span>,</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"EPAM"</span> <span class="sc">~</span> <span class="st">"Information Technology"</span>,</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"ELV"</span> <span class="sc">~</span> <span class="st">"Health Care"</span>,</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"KDP"</span> <span class="sc">~</span> <span class="st">"Consumer Staples"</span>,</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"VICI"</span> <span class="sc">~</span> <span class="st">"Real Estate"</span>,</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"META"</span> <span class="sc">~</span> <span class="st">"Communication Services"</span>,</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CSGP"</span> <span class="sc">~</span> <span class="st">"Real Estate"</span>,</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"WBD"</span> <span class="sc">~</span> <span class="st">"Communication Services"</span>,</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CEG"</span> <span class="sc">~</span> <span class="st">"Utilities"</span>,</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"ON"</span> <span class="sc">~</span> <span class="st">"Materials"</span>,</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"WTW"</span> <span class="sc">~</span> <span class="st">"Communication Services"</span>,</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"PCG"</span> <span class="sc">~</span> <span class="st">"Energy"</span>,</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"INVH"</span> <span class="sc">~</span> <span class="st">"Real Estate"</span>,</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"BALL"</span> <span class="sc">~</span> <span class="st">"Materials"</span>,</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"FDS"</span> <span class="sc">~</span> <span class="st">"Information Technology"</span>,</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"EQT"</span> <span class="sc">~</span> <span class="st">"Utilities"</span>,</span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"TRGP"</span> <span class="sc">~</span> <span class="st">"Utilities"</span>,</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"CPT"</span> <span class="sc">~</span> <span class="st">"Real Estate"</span>,</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"NDSN"</span> <span class="sc">~</span> <span class="st">"Industrials"</span>,</span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"SEDG"</span> <span class="sc">~</span> <span class="st">"Materials"</span>,</span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"PARA"</span> <span class="sc">~</span> <span class="st">"Communication Services"</span>,</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>      symbol <span class="sc">==</span> <span class="st">"SBNY"</span> <span class="sc">~</span> <span class="st">"Financials"</span>,</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> sector</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>    name, symbol, weight, original_price, </span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>    current_price, ytd_return_num, sector, return_category</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sp500_by_company_and_sector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 503
Columns: 8
$ name            &lt;chr&gt; "Apple", "Microsoft", "Amazon", "Alphabet (Class A)", …
$ symbol          &lt;chr&gt; "AAPL", "MSFT", "AMZN", "GOOGL", "TSLA", "GOOG", "BRK.…
$ weight          &lt;dbl&gt; 6.940598, 5.685000, 3.296234, 1.931161, 1.874430, 1.73…
$ original_price  &lt;dbl&gt; 177.88758, 333.04188, 164.96633, 143.61075, 342.80915,…
$ current_price   &lt;dbl&gt; 144.00, 236.16, 115.13, 99.91, 214.29, 100.60, 278.50,…
$ ytd_return_num  &lt;dbl&gt; -19.05, -29.09, -30.21, -30.43, -37.49, -29.92, -5.80,…
$ sector          &lt;chr&gt; "Information Technology", "Information Technology", "C…
$ return_category &lt;chr&gt; "loss", "loss", "loss", "loss", "loss", "loss", "loss"…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|: saving-created-data-sets-to-data-folder</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(historical_data, <span class="at">file =</span> <span class="st">"data/historical_data.csv"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(sp500_curr_updated, <span class="at">file =</span> <span class="st">"data/sp500_curr_updated.csv"</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(sp500_by_company_and_sector, <span class="at">file =</span> <span class="st">"data/sp500_by_company_and_sector.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>